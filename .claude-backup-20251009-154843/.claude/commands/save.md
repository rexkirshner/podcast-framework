---
name: save
description: Quick session save - updates current state only (2-3 minutes)
---

# /save Command

**Quick session save** - Updates current state without comprehensive documentation. Use this for most sessions during continuous work.

**For comprehensive documentation before breaks/handoffs, use `/save-full`**

## When to Use This Command

**Every session (default):**
- End of work session
- Switching tasks
- Quick check-in points

**Target time: 2-3 minutes**

## What This Command Does

1. Auto-extracts git changes (status, diff, staged)
2. Updates STATUS.md (current tasks, blockers, next steps)
3. Auto-generates QUICK_REF.md (dashboard)
4. Reports what changed

**Does NOT:**
- Create SESSIONS.md entry (use /save-full for that)
- Update DECISIONS.md (add manually when needed)
- Export JSON (use /export-context when needed)

## Execution Steps

### Step 1: Verify Context Exists

```bash
if [ ! -d "context" ]; then
  echo "❌ No context/ directory found"
  echo "Run /init-context first"
  exit 1
fi
```

### Step 2: Auto-Extract Git Data

**ACTION:** Use Bash tool to extract git information:

```bash
echo "📊 Analyzing changes..."
echo ""

# Get git status
if git rev-parse --git-dir > /dev/null 2>&1; then
  GIT_STATUS=$(git status --short 2>/dev/null || echo "No changes")
  GIT_BRANCH=$(git branch --show-current 2>/dev/null || echo "unknown")

  # Count changes
  NEW_FILES=$(echo "$GIT_STATUS" | grep "^??" | wc -l | tr -d ' ')
  MODIFIED_FILES=$(echo "$GIT_STATUS" | grep "^ M\|^M " | wc -l | tr -d ' ')
  STAGED_FILES=$(echo "$GIT_STATUS" | grep "^A \|^M " | wc -l | tr -d ' ')

  echo "Branch: $GIT_BRANCH"
  echo "New: $NEW_FILES | Modified: $MODIFIED_FILES | Staged: $STAGED_FILES"
  echo ""
else
  echo "⚠️  Not a git repository"
  echo ""
fi
```

### Step 3: Update STATUS.md

**ACTION:** Use Read tool to read current STATUS.md, then use Edit tool to update:

**Prompt user for quick updates:**
```
Current tasks? (comma-separated, or press enter to keep existing):
>

Blockers? (or press enter for none):
>

Next steps? (or press enter to keep existing):
>
```

**Update Work In Progress section:**
```markdown
## Work In Progress

**Current Task:** [What you're working on right now]
**Location:** `file.ts:line` (if applicable)
**Next Action:** [Specific next step when you resume]
**Blockers:** [None / List any blockers]

**Last Updated:** [YYYY-MM-DD HH:MM]
```

**Update Active Tasks section:**
```markdown
## Active Tasks

- [ ] [Task 1]
- [ ] [Task 2]
- [x] [Completed task]

**Priority:** [Next most important task]
```

### Step 4: Auto-Generate QUICK_REF.md

**ACTION:** Use Read tool to read STATUS.md, CONTEXT.md, and .context-config.json, then generate QUICK_REF.md:

```markdown
# Quick Reference

**Auto-generated by `/save`** - Do not edit manually

---

## Project: [Project Name]

**Current:** [Phase from STATUS.md] | **Branch:** [Git branch] | **Last Updated:** [Timestamp]

## Tech Stack

[From CONTEXT.md or config]

## URLs

- **Production:** [URL]
- **Staging:** [URL]
- **Local:** [URL]
- **Repository:** [GitHub URL]

## Current Focus

**Phase:** [From STATUS.md]
**Active Tasks:** [From STATUS.md]
**Priority:** [From STATUS.md]
**Blockers:** [From STATUS.md]

## Quick Commands

```bash
[From CONTEXT.md or infer from package.json]
```

## Context Navigation

- **Orientation:** `context/CONTEXT.md`
- **Current Status:** `context/STATUS.md`
- **Decision Log:** `context/DECISIONS.md`
- **Session History:** `context/SESSIONS.md`

---

**Last Updated:** [Timestamp]
**Next Session:** Resume with priority task in STATUS.md
```

### Step 5: Report Updates

**ACTION:** Output summary to user:

```
✅ Quick Save Complete

**Updated:**
- STATUS.md - Work in progress and active tasks
- QUICK_REF.md - Auto-generated dashboard

**Time:** ~2-3 minutes

**Git Status:** 3 new, 5 modified, 2 staged files on branch main

**Current Focus:** [Brief summary from STATUS.md]

**Next Session:**
Run /save again for quick update, or /save-full before breaks/handoffs.

---

💡 Tip: Run /save-full before taking breaks >1 week or handing off to another agent
```

## Important Notes

### This is the Default Command

For **continuous work** (most sessions):
- Use `/save`
- 2-3 minutes
- Updates current state
- No comprehensive session history

For **breaks/handoffs** (occasional):
- Use `/save-full`
- 10-15 minutes
- Creates SESSIONS.md entry
- Comprehensive documentation

### What Gets Updated

**Every /save:**
- ✅ STATUS.md (current tasks, blockers, next steps)
- ✅ QUICK_REF.md (auto-generated)

**Not updated:**
- ❌ SESSIONS.md (use /save-full)
- ❌ DECISIONS.md (update manually when important decision made)

### Time Investment

**Target:** 2-3 minutes per session

**20 sessions:**
- 17× /save: 34-51 minutes
- 3× /save-full: 30-45 minutes
- **Total: 64-96 minutes** (vs. 100-200 min in v1.8.0)

### When to Use /save-full

Use `/save-full` (comprehensive) when:
- Taking break >1 week
- Handing off to another agent
- Major milestone completed
- Want comprehensive session history entry

Frequency: ~3-5 times per 20 sessions

## Workflow Example

**Typical 20-Session Project:**

```
Session 1-5:   /save (2-3 min each)
Session 6:     /save-full (weekend break coming)
Session 7-12:  /save (2-3 min each)
Session 13:    /save-full (major milestone completed)
Session 14-19: /save (2-3 min each)
Session 20:    /save-full (project handoff)
```

**Time Investment:**
- 17× /save: ~40-50 min
- 3× /save-full: ~30-45 min
- **Total: ~70-95 min** (instead of 100-200 min)

**Savings: 30-50% reduction in overhead**

## Success Criteria

Save succeeds when:
- STATUS.md updated with current state
- QUICK_REF.md regenerated
- Completed in 2-3 minutes
- User knows where they left off
- Can resume easily next session

**Perfect save:**
- Quick and painless (no overhead feeling)
- Current state captured
- Ready to resume work
- Comprehensive docs when actually needed (use /save-full)
