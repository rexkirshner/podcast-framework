---
// Footer component with Sanity integration
// Receives podcastInfo and theme as props from BaseLayout (prevents duplicate fetching)
import { defaultTheme } from "../lib/theme";
import type { Podcast } from "../lib/sanity";
import type { Theme } from "../lib/theme";

interface Props {
  podcastInfo: Podcast | null;
  theme?: Theme;
}

const { podcastInfo, theme = defaultTheme } = Astro.props;
const currentYear = new Date().getFullYear();
const siteName = podcastInfo?.name || "Podcast";
const siteDescription = podcastInfo?.description || "";
const showContribute = podcastInfo?.isActive === true;
---

<footer style="background: var(--color-footer-bg); color: var(--color-footer-text);" class="mt-16">
  <div class="max-w-6xl mx-auto px-4 py-12">
    <div class="grid grid-cols-1 md:grid-cols-[2fr_1fr_1fr] gap-12 mb-8">
      <!-- Brand Section -->
      <div class="max-w-md">
        <h3 class="font-bold text-lg mb-4" style="color: var(--color-secondary);">{siteName}</h3>
        <p class="text-sm leading-relaxed">
          {siteDescription}
        </p>
      </div>

      <!-- Navigation Section -->
      <div>
        <h4 class="font-semibold mb-4" style="color: var(--color-secondary);">Navigation</h4>
        <ul class="space-y-2 text-sm">
          <li>
            <a href="/" class="hover:opacity-75 transition">Home</a>
          </li>
          <li>
            <a href="/episodes" class="hover:opacity-75 transition">Episodes</a>
          </li>
          <li>
            <a href="/guests" class="hover:opacity-75 transition">Guests</a>
          </li>
          {showContribute && (
            <li>
              <a href="/contribute" class="hover:opacity-75 transition">Contribute</a>
            </li>
          )}
          <li>
            <a href="/about" class="hover:opacity-75 transition">About</a>
          </li>
        </ul>
      </div>

      <!-- Subscribe Section -->
      <div>
        <h4 class="font-semibold mb-4" style="color: var(--color-secondary);">Subscribe</h4>
        <ul class="space-y-2 text-sm">
          {podcastInfo?.spotifyUrl && (
            <li>
              <a
                href={podcastInfo.spotifyUrl}
                class="hover:opacity-75 transition"
                target="_blank"
                rel="noopener noreferrer"
              >
                Spotify
              </a>
            </li>
          )}
          {podcastInfo?.appleUrl && (
            <li>
              <a
                href={podcastInfo.appleUrl}
                class="hover:opacity-75 transition"
                target="_blank"
                rel="noopener noreferrer"
              >
                Apple Podcasts
              </a>
            </li>
          )}
          {podcastInfo?.youtubeUrl && (
            <li>
              <a
                href={podcastInfo.youtubeUrl}
                class="hover:opacity-75 transition"
                target="_blank"
                rel="noopener noreferrer"
              >
                YouTube
              </a>
            </li>
          )}
          {podcastInfo?.rssUrl && (
            <li>
              <a
                href={podcastInfo.rssUrl}
                class="hover:opacity-75 transition"
                target="_blank"
                rel="noopener noreferrer"
              >
                RSS Feed
              </a>
            </li>
          )}
          {podcastInfo?.twitterUrl && (
            <li>
              <a
                href={podcastInfo.twitterUrl}
                class="hover:opacity-75 transition"
                target="_blank"
                rel="noopener noreferrer"
              >
                Twitter/X
              </a>
            </li>
          )}
          {podcastInfo?.discordUrl && (
            <li>
              <a
                href={podcastInfo.discordUrl}
                class="hover:opacity-75 transition"
                target="_blank"
                rel="noopener noreferrer"
              >
                Discord
              </a>
            </li>
          )}
        </ul>
      </div>
    </div>

    <!-- Copyright -->
    <div class="border-t pt-8 text-center text-sm" style:border-color={`rgba(${theme.colors.primary}, 0.2)`}>
      <p>&copy; {currentYear} <span style="color: var(--color-secondary);">{siteName}</span>. All rights reserved.</p>
    </div>
  </div>
</footer>
